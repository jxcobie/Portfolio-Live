{"version":3,"file":"messages-L2dTvUKD.js","sources":["../../src/routes/messages.tsx"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\n\nimport { Card, CardDescription, CardHeader, CardTitle } from '../ui/card';\n\ninterface MessagesResponse {\n  data: Array<{\n    id: number;\n    name: string;\n    email: string;\n    subject: string | null;\n    message: string;\n    is_read: boolean | null;\n    created_at: string | null;\n  }>;\n}\n\nasync function fetchMessages(): Promise<MessagesResponse> {\n  const response = await fetch('/api/v2/messages?page=1&pageSize=20', {\n    credentials: 'include'\n  });\n  if (!response.ok) {\n    throw new Error(`Failed to load messages (${response.status})`);\n  }\n  return response.json();\n}\n\nexport default function MessagesRoute() {\n  const { data, isLoading, error } = useQuery({\n    queryKey: ['messages', 'list'],\n    queryFn: fetchMessages,\n    staleTime: 1000 * 60 // 1 minute\n  });\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h2 className=\"text-3xl font-semibold tracking-tight\">Messages</h2>\n        <p className=\"text-muted-foreground\">Recent contact form submissions awaiting review.</p>\n      </div>\n      <Card className=\"bg-slate-900/80\">\n        <CardHeader>\n          <CardTitle>Inbox</CardTitle>\n          <CardDescription>\n            {isLoading && 'Loading messages…'}\n            {error instanceof Error && <span className=\"text-rose-200\">{error.message}</span>}\n            {data && data.data.length === 0 && !isLoading && !error && 'Inbox is clear.'}\n          </CardDescription>\n          {!isLoading && !error && data && data.data.length > 0 && (\n            <div className=\"mt-4 divide-y divide-white/10\">\n              {data.data.map((message) => (\n                <article key={message.id} className=\"flex flex-col gap-2 py-4\">\n                  <header className=\"flex items-center justify-between\">\n                    <div>\n                      <h3 className=\"font-semibold\">{message.subject ?? 'Untitled message'}</h3>\n                      <p className=\"text-xs text-muted-foreground\">\n                        From {message.name} · {message.email}\n                      </p>\n                    </div>\n                    <span\n                      className={`rounded-full px-3 py-1 text-xs uppercase tracking-wide ${\n                        message.is_read ? 'bg-emerald-500/10 text-emerald-300' : 'bg-primary/10 text-primary'\n                      }`}\n                    >\n                      {message.is_read ? 'Read' : 'Unread'}\n                    </span>\n                  </header>\n                  <p className=\"text-sm text-muted-foreground whitespace-pre-line\">{message.message}</p>\n                </article>\n              ))}\n            </div>\n          )}\n        </CardHeader>\n      </Card>\n    </div>\n  );\n}\n"],"names":["fetchMessages","response","MessagesRoute","data","isLoading","error","useQuery","jsxs","jsx","Card","CardHeader","CardTitle","CardDescription","message"],"mappings":"sGAgBA,eAAeA,GAA2C,CACxD,MAAMC,EAAW,MAAM,MAAM,sCAAuC,CAClE,YAAa,SAAA,CACd,EACD,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,4BAA4BA,EAAS,MAAM,GAAG,EAEhE,OAAOA,EAAS,KAAA,CAClB,CAEA,SAAwBC,GAAgB,CACtC,KAAM,CAAE,KAAAC,EAAM,UAAAC,EAAW,MAAAC,CAAA,EAAUC,EAAS,CAC1C,SAAU,CAAC,WAAY,MAAM,EAC7B,QAASN,EACT,UAAW,GAAO,CACnB,EAED,OACEO,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,WAAQ,EAC9DA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,kDAAA,CAAgD,CAAA,EACvF,EACAA,MAACC,EAAA,CAAK,UAAU,kBACd,gBAACC,EAAA,CACC,SAAA,CAAAF,EAAAA,IAACG,GAAU,SAAA,OAAA,CAAK,SACfC,EAAA,CACE,SAAA,CAAAR,GAAa,oBACbC,aAAiB,OAASG,EAAAA,IAAC,QAAK,UAAU,gBAAiB,WAAM,QAAQ,EACzEL,GAAQA,EAAK,KAAK,SAAW,GAAK,CAACC,GAAa,CAACC,GAAS,iBAAA,EAC7D,EACC,CAACD,GAAa,CAACC,GAASF,GAAQA,EAAK,KAAK,OAAS,GAClDK,MAAC,OAAI,UAAU,gCACZ,WAAK,KAAK,IAAKK,GACdN,EAAAA,KAAC,UAAA,CAAyB,UAAU,2BAClC,SAAA,CAAAA,EAAAA,KAAC,SAAA,CAAO,UAAU,oCAChB,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,MAAC,KAAA,CAAG,UAAU,gBAAiB,SAAAK,EAAQ,SAAW,mBAAmB,EACrEN,EAAAA,KAAC,IAAA,CAAE,UAAU,gCAAgC,SAAA,CAAA,QACrCM,EAAQ,KAAK,MAAIA,EAAQ,KAAA,CAAA,CACjC,CAAA,EACF,EACAL,EAAAA,IAAC,OAAA,CACC,UAAW,0DACTK,EAAQ,QAAU,qCAAuC,4BAC3D,GAEC,SAAAA,EAAQ,QAAU,OAAS,QAAA,CAAA,CAC9B,EACF,EACAL,EAAAA,IAAC,IAAA,CAAE,UAAU,oDAAqD,WAAQ,OAAA,CAAQ,CAAA,GAhBtEK,EAAQ,EAiBtB,CACD,CAAA,CACH,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,EACF,CAEJ"}