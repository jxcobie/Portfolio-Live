{"version":3,"file":"bookings-BGn9NCx2.js","sources":["../../src/routes/bookings.tsx"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\n\nimport { Card, CardDescription, CardHeader, CardTitle } from '../ui/card';\n\ninterface BookingResponse {\n  data: Array<{\n    id: number;\n    name: string;\n    email: string;\n    date: string;\n    time: string;\n    duration: number;\n    status: string | null;\n    meeting_type: string;\n    notes: string | null;\n  }>;\n}\n\nasync function fetchBookings(): Promise<BookingResponse> {\n  const response = await fetch('/api/v2/bookings?upcoming=true&page=1&pageSize=20', {\n    credentials: 'include'\n  });\n  if (!response.ok) {\n    throw new Error(`Failed to load bookings (${response.status})`);\n  }\n  return response.json();\n}\n\nexport default function BookingsRoute() {\n  const { data, isLoading, error } = useQuery({\n    queryKey: ['bookings', 'upcoming'],\n    queryFn: fetchBookings,\n    refetchInterval: 1000 * 60 * 5\n  });\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h2 className=\"text-3xl font-semibold tracking-tight\">Bookings</h2>\n        <p className=\"text-muted-foreground\">Upcoming confirmed meetings synced from the new API.</p>\n      </div>\n      <Card className=\"bg-slate-900/80\">\n        <CardHeader>\n          <CardTitle>Upcoming schedule</CardTitle>\n          <CardDescription>\n            {isLoading && 'Loading bookings…'}\n            {error instanceof Error && <span className=\"text-rose-200\">{error.message}</span>}\n            {data && data.data.length === 0 && !isLoading && !error && 'No upcoming bookings.'}\n          </CardDescription>\n          {!isLoading && !error && data && data.data.length > 0 && (\n            <div className=\"mt-4 space-y-3\">\n              {data.data.map((booking) => (\n                <div\n                  key={booking.id}\n                  className=\"rounded-lg border border-white/5 bg-slate-900/60 px-4 py-3 transition hover:border-primary/40\"\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"font-medium\">\n                        {booking.date} · {booking.time} ({booking.duration} min)\n                      </p>\n                      <p className=\"text-xs text-muted-foreground\">\n                        {booking.name} · {booking.email}\n                      </p>\n                    </div>\n                    <span className=\"rounded-full bg-primary/10 px-3 py-1 text-xs uppercase tracking-wide text-primary\">\n                      {booking.status ?? 'pending'}\n                    </span>\n                  </div>\n                  <p className=\"mt-2 text-sm text-muted-foreground\">\n                    Meeting type: {booking.meeting_type}\n                  </p>\n                  {booking.notes ? (\n                    <p className=\"mt-2 text-sm text-muted-foreground whitespace-pre-wrap\">\n                      {booking.notes}\n                    </p>\n                  ) : null}\n                </div>\n              ))}\n            </div>\n          )}\n        </CardHeader>\n      </Card>\n    </div>\n  );\n}\n"],"names":["fetchBookings","response","BookingsRoute","data","isLoading","error","useQuery","jsxs","jsx","Card","CardHeader","CardTitle","CardDescription","booking"],"mappings":"2GAkBA,eAAeA,GAA0C,CACvD,MAAMC,EAAW,MAAM,MAAM,oDAAqD,CAChF,YAAa,SAAA,CACd,EACD,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,4BAA4BA,EAAS,MAAM,GAAG,EAEhE,OAAOA,EAAS,KAAA,CAClB,CAEA,SAAwBC,GAAgB,CACtC,KAAM,CAAE,KAAAC,EAAM,UAAAC,EAAW,MAAAC,CAAA,EAAUC,EAAS,CAC1C,SAAU,CAAC,WAAY,UAAU,EACjC,QAASN,EACT,gBAAiB,GAAY,CAC9B,EAED,OACEO,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,WAAQ,EAC9DA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,sDAAA,CAAoD,CAAA,EAC3F,EACAA,MAACC,EAAA,CAAK,UAAU,kBACd,gBAACC,EAAA,CACC,SAAA,CAAAF,EAAAA,IAACG,GAAU,SAAA,mBAAA,CAAiB,SAC3BC,EAAA,CACE,SAAA,CAAAR,GAAa,oBACbC,aAAiB,OAASG,EAAAA,IAAC,QAAK,UAAU,gBAAiB,WAAM,QAAQ,EACzEL,GAAQA,EAAK,KAAK,SAAW,GAAK,CAACC,GAAa,CAACC,GAAS,uBAAA,EAC7D,EACC,CAACD,GAAa,CAACC,GAASF,GAAQA,EAAK,KAAK,OAAS,GAClDK,EAAAA,IAAC,OAAI,UAAU,iBACZ,WAAK,KAAK,IAAKK,GACdN,EAAAA,KAAC,MAAA,CAEC,UAAU,gGAEV,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,IAAA,CAAE,UAAU,cACV,SAAA,CAAAM,EAAQ,KAAK,MAAIA,EAAQ,KAAK,KAAGA,EAAQ,SAAS,OAAA,EACrD,EACAN,EAAAA,KAAC,IAAA,CAAE,UAAU,gCACV,SAAA,CAAAM,EAAQ,KAAK,MAAIA,EAAQ,KAAA,CAAA,CAC5B,CAAA,EACF,QACC,OAAA,CAAK,UAAU,oFACb,SAAAA,EAAQ,QAAU,SAAA,CACrB,CAAA,EACF,EACAN,EAAAA,KAAC,IAAA,CAAE,UAAU,qCAAqC,SAAA,CAAA,iBACjCM,EAAQ,YAAA,EACzB,EACCA,EAAQ,MACPL,MAAC,IAAA,CAAE,UAAU,yDACV,SAAAK,EAAQ,MACX,EACE,IAAA,CAAA,EAvBCA,EAAQ,EAAA,CAyBhB,CAAA,CACH,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,EACF,CAEJ"}